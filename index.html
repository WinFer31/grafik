<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞—Ñ–∏–∫ –†–∞–±–æ—Ç—ã –î–∏–º—ã</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* –í–µ—Å—å –¥–∏–∑–∞–π–Ω (CSS) –±—É–¥–µ—Ç –ø—Ä—è–º–æ –∑–¥–µ—Å—å */
        
        /* –°—Ç–∏–ª–∏, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤–∞—à–µ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π */
        body {
            font-family: 'Nunito', sans-serif;
            /* –ì—Ä–∞–¥–∏–µ–Ω—Ç –Ω–µ–±–∞ */
            background: linear-gradient(to bottom, #87CEEB 0%, #B2EBF2 100%);
            display: grid;
            place-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background: #ffffff;
            padding: 30px 40px;
            border-radius: 20px;
            /* –¢–µ–Ω—å, –∫–∞–∫ –Ω–∞ –±–ª–æ–∫–∞—Ö —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }

        h1 {
            /* –Ø—Ä–∫–∏–π "—Å–æ–ª–Ω–µ—á–Ω—ã–π" –æ—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç */
            color: #FFA500;
            font-size: 2.5em; /* 2.5em = 40px, –µ—Å–ª–∏ –±–∞–∑–æ–≤—ã–π 16px */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            margin-top: 0;
            margin-bottom: 20px;
        }

        p {
            color: #555;
            font-size: 1.1em;
            margin-bottom: 25px;
        }

        /* –°—Ç–∏–ª–∏–∑—É–µ–º –∏–Ω–ø—É—Ç –¥–∞—Ç—ã */
        input[type="date"] {
            width: 90%;
            padding: 12px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin-bottom: 20px;
            box-sizing: border-box; /* –ß—Ç–æ–±—ã padding –Ω–µ –ª–æ–º–∞–ª —à–∏—Ä–∏–Ω—É */
        }

        /* –°—Ç–∏–ª–∏–∑—É–µ–º –∫–Ω–æ–ø–∫—É */
        button {
            background-color: #32CD32; /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π */
            color: white;
            font-family: 'Nunito', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }

        button:hover {
            background-color: #28a745; /* –ß—É—Ç—å —Ç–µ–º–Ω–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }
        
        button:active {
            transform: scale(0.98); /* –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è */
        }

        /* –ó–æ–Ω–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ */
        #result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: 700;
            /* –°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è */
            display: none; 
        }

        /* –ö–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ JS */
        .free {
            background: #E0F8E0; /* –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω */
            color: #28a745;      /* –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π —Ç–µ–∫—Å—Ç */
            display: block !important;
        }

        .busy {
            background: #F8E0E0; /* –°–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
            color: #d9534f;      /* –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç */
            display: block !important;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>‚òÄÔ∏è –ì—Ä–∞—Ñ–∏–∫ –î–∏–º—ã üêù</h1>
        <p>–ü—Ä–∏–≤–µ—Ç! –í–≤–µ–¥–∏ –¥–∞—Ç—É, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–≤–æ–±–æ–¥–µ–Ω –ª–∏ —è:</p>
        
        <input type="date" id="date-input">
        <button onclick="checkDate()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å!</button>
        
        <div id="result"></div>
    </div>

    <script>
        // –í—Å—è –ª–æ–≥–∏–∫–∞ (JavaScript) –±—É–¥–µ—Ç –ø—Ä—è–º–æ –∑–¥–µ—Å—å

        // --- ‚ùóÔ∏è –í–ê–ñ–ù–û: –ù–ê–°–¢–†–û–ô–ö–ê –ì–†–ê–§–ò–ö–ê ---
        // –ü–æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ—Ç –≥–æ–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º 12 —è–Ω–≤–∞—Ä—è —É –≤–∞—Å –ù–ê–ß–ê–õ–ê–°–¨ –ø–µ—Ä–≤–∞—è –≤–∞—Ö—Ç–∞
        const START_YEAR = 2025; 
        // ---

        // --- –õ–û–ì–ò–ö–ê –†–ê–°–ß–ï–¢–ê (–ø–æ—Ä—Ç —Å Python) ---

        // JS —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞—Ç–∞–º–∏ –Ω–µ–º–Ω–æ–≥–æ –∏–Ω–∞—á–µ. –ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UTC 
        // –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏.
        // –ú–µ—Å—è—Ü—ã –≤ JS —Å—á–∏—Ç–∞—é—Ç—Å—è —Å 0 (–Ø–Ω–≤–∞—Ä—å = 0, –§–µ–≤—Ä–∞–ª—å = 1...)
        
        const first_shift_start = new Date(Date.UTC(START_YEAR, 0, 12)); // 12 –Ø–Ω–≤–∞—Ä—è

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–Ω–µ–π –∫ –¥–∞—Ç–µ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é –¥–∞—Ç—É)
        function addDays(date, days) {
            const result = new Date(date);
            result.setUTCDate(result.getUTCDate() + days);
            return result;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–Ω–∏—Ü—ã –≤ –¥–Ω—è—Ö
        function getDaysDiff(date1, date2) {
            const oneDay = 1000 * 60 * 60 * 24; // –º—Å –≤ –æ–¥–Ω–æ–º –¥–Ω–µ
            // –ú—ã –æ—Ç—Å–µ–∫–∞–µ–º –≤—Ä–µ–º—è, –∏—Å–ø–æ–ª—å–∑—É—è .getTime()
            const diffMs = date2.getTime() - date1.getTime();
            return Math.floor(diffMs / oneDay);
        }

        // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª—é—á–µ–≤—ã–µ –¥–∞—Ç—ã
        const first_shift_duration = 14;
        const first_break_duration = 21;
        
        // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–≤–æ–π –≤–∞—Ö—Ç—ã (–∏ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–¥—ã—Ö–∞)
        const first_shift_end = addDays(first_shift_start, first_shift_duration); // 26 –Ø–Ω–≤–∞—Ä—è
        
        // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ (–∏ –Ω–∞—á–∞–ª–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞)
        const normal_cycle_start = addDays(first_shift_end, first_break_duration); // 16 –§–µ–≤—Ä–∞–ª—è

        // 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (28/28)
        const normal_shift_days = 28;
        const normal_break_days = 28;
        const normal_total_cycle_days = normal_shift_days + normal_break_days; // 56 –¥–Ω–µ–π

        function getDimaStatus(targetDate) {
            // 0. –ü—Ä–æ–≤–µ—Ä–∫–∞: –î–∞—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–≤–æ–π –≤–∞—Ö—Ç—ã
            if (targetDate < first_shift_start) {
                return { status: "free", text: "–Ø –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —ç—Ç–æ–º—É –≥—Ä–∞—Ñ–∏–∫—É (–¥–æ 12.01)" };
            }

            // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞: –ü–µ—Ä–≤–∞—è –≤–∞—Ö—Ç–∞ (14 –¥–Ω–µ–π)
            if (targetDate < first_shift_end) {
                const days_in = getDaysDiff(first_shift_start, targetDate) + 1;
                return { status: "busy", text: `–Ø –ù–ê –í–ê–•–¢–ï (–ü–µ—Ä–≤–∞—è –≤–∞—Ö—Ç–∞, ${days_in}-–π –¥–µ–Ω—å)` };
            }

            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞: –ü–µ—Ä–≤—ã–π –æ—Ç–¥—ã—Ö (21 –¥–µ–Ω—å)
            if (targetDate < normal_cycle_start) {
                const days_in = getDaysDiff(first_shift_end, targetDate) + 1;
                return { status: "free", text: `–Ø –î–û–ú–ê! (–ü–µ—Ä–≤—ã–π –æ—Ç–¥—ã—Ö, ${days_in}-–π –¥–µ–Ω—å)` };
            }

            // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ (28/28)
            const days_since_normal_cycle_start = getDaysDiff(normal_cycle_start, targetDate);
            const day_in_cycle = days_since_normal_cycle_start % normal_total_cycle_days;

            if (day_in_cycle < normal_shift_days) {
                // –ï—Å–ª–∏ –¥–µ–Ω—å –≤ —Ü–∏–∫–ª–µ 0-27, —ç—Ç–æ —Ä–∞–±–æ—Ç–∞
                const day_num = day_in_cycle + 1;
                return { status: "busy", text: `–Ø –ù–ê –í–ê–•–¢–ï (–ì—Ä–∞—Ñ–∏–∫ 28/28, ${day_num}-–π –¥–µ–Ω—å)` };
            } else {
                // –ï—Å–ª–∏ –¥–µ–Ω—å –≤ —Ü–∏–∫–ª–µ 28-55, —ç—Ç–æ –æ—Ç–¥—ã—Ö
                const day_num = day_in_cycle - normal_shift_days + 1;
                return { status: "free", text: `–Ø –î–û–ú–ê! (–ì—Ä–∞—Ñ–∏–∫ 28/28, ${day_num}-–π –¥–µ–Ω—å –æ—Ç–¥—ã—Ö–∞)` };
            }
        }

        // --- –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∞ ---

        function checkDate() {
            const dateInputElement = document.getElementById('date-input');
            const resultElement = document.getElementById('result');

            if (!dateInputElement.value) {
                // –ï—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
                resultElement.textContent = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –¥–∞—Ç—É!";
                resultElement.className = 'busy'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—Ä–∞—Å–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –æ—à–∏–±–∫–∏
                resultElement.style.display = 'block';
                return;
            }

            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É 'YYYY-MM-DD' –≤ –æ–±—ä–µ–∫—Ç Date –≤ UTC
            const dateParts = dateInputElement.value.split('-').map(part => parseInt(part, 10));
            // new Date(Date.UTC(–≥–æ–¥, –º–µ—Å—è—Ü-1, –¥–µ–Ω—å))
            const targetDate = new Date(Date.UTC(dateParts[0], dateParts[1] - 1, dateParts[2]));

            const result = getDimaStatus(targetDate);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            resultElement.textContent = result.text;
            // –ú–µ–Ω—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å–º–µ–Ω—ã —Ü–≤–µ—Ç–∞
            resultElement.className = result.status; // 'free' –∏–ª–∏ 'busy'
        }

    </script>
</body>
</html>
